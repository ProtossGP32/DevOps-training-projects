<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.475">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="ProtossGP32">
<meta name="dcterms.date" content="2023-03-28">
<meta name="description" content="Knowing some available observability tools">

<title>DevOps Training Projects - 01 - Observability Instrumentation</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../devops-tools/observability/00-what-is-observability.html" rel="prev">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-sidebar docked nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">DevOps Training Projects</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-devops-exercises" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">DevOps exercises</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-devops-exercises">    
        <li class="dropdown-header">Explore California</li>
        <li>
    <a class="dropdown-item" href="../../devops-exercises/explore-california/00-introduction.html">
 <span class="dropdown-text">Explore California</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-devops-tools" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">DevOps tools</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-devops-tools">    
        <li class="dropdown-header">Infrastructure As a Code</li>
        <li>
    <a class="dropdown-item" href="../../devops-tools/infrastructure-as-a-code/00-ansible.html">
 <span class="dropdown-text">00 - Infrastructure As A Code - Ansible</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../devops-tools/infrastructure-as-a-code/01-event-driven-ansible.html">
 <span class="dropdown-text">01 - Management As A Code - Event-Driven Ansible</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li class="dropdown-header">Observability</li>
        <li>
    <a class="dropdown-item" href="../../devops-tools/observability/00-what-is-observability.html">
 <span class="dropdown-text">00 - Observability - Introduction</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../devops-tools/observability/01-observability-tools.html">
 <span class="dropdown-text">01 - Observability Instrumentation</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-homelab-project" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Homelab project</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-homelab-project">    
        <li>
    <a class="dropdown-item" href="../../homelab-project/00-introduction.html">
 <span class="dropdown-text">Homelab project introduction</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li class="dropdown-header">Kubernetes Cluster</li>
        <li>
    <a class="dropdown-item" href="../../homelab-project/kubernetes-cluster/00-getting-started.html">
 <span class="dropdown-text">00 - Kubernetes - Getting Started</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../homelab-project/kubernetes-cluster/01-installing-traefik.html">
 <span class="dropdown-text">01 - Kubernetes - Traefik + cert-manager</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li class="dropdown-header">Requirements</li>
        <li>
    <a class="dropdown-item" href="../../homelab-project/requirements/00-requirements.html">
 <span class="dropdown-text">Homelab Requirements</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li class="dropdown-header">Self Hosted Software</li>
        <li>
    <a class="dropdown-item" href="../../homelab-project/self-hosted-software/00-docker-and-docker-compose.html">
 <span class="dropdown-text">00 - Containers - Docker &amp; Docker Compose</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../homelab-project/self-hosted-software/01-cloudflare.html">
 <span class="dropdown-text">01 - External access - Cloudflare</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../homelab-project/self-hosted-software/02-traefik-and-portainer.html">
 <span class="dropdown-text">02 - Routing and SSL certificates - Traefik and Portainer</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../homelab-project/self-hosted-software/03-dashy.html">
 <span class="dropdown-text">03 - Homelab dashboard - Dashy</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../homelab-project/self-hosted-software/04-openldap.html">
 <span class="dropdown-text">04 - Authentication - OpenLDAP</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../homelab-project/self-hosted-software/05-nextcloud.html">
 <span class="dropdown-text">05 - Productivity tools - NextCloud</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../homelab-project/self-hosted-software/06-openproject.html">
 <span class="dropdown-text">06 - Productivity tools - OpenProject</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../homelab-project/self-hosted-software/07-sonarqube.html">
 <span class="dropdown-text">07 - Code analysis - SonarQube</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../homelab-project/self-hosted-software/08-guacamole.html">
 <span class="dropdown-text">08 - Remote access - Guacamole</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li class="dropdown-header">Virtual Resources Creation</li>
        <li>
    <a class="dropdown-item" href="../../homelab-project/virtual-resources-creation/01-virtual-machines.html">
 <span class="dropdown-text">01 - Provisioning - Virtual Machines on Proxmox</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../homelab-project/virtual-resources-creation/02-containers.html">
 <span class="dropdown-text">02 - Provisioning - LXC (Linux Containers on Proxmox)</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li class="dropdown-header">Virtualization Server</li>
        <li>
    <a class="dropdown-item" href="../../homelab-project/virtualization-server/01-installing-proxmox.html">
 <span class="dropdown-text">Part 1 - Installing Proxmox VE</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../homelab-project/virtualization-server/02-virtual-networks.html">
 <span class="dropdown-text">Part 2 - Internal Virtual Networks</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../homelab-project/virtualization-server/03-dns-dhcp-servers.html">
 <span class="dropdown-text">Part 3 - DNS and DHCP servers</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../homelab-project/virtualization-server/04-proxy-http-https-into-internal-network.html">
 <span class="dropdown-text">Part 4 - Proxy HTTP(S) into the internal network</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="../../about.html">
 <span class="menu-text">About</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/protossgp32"><i class="bi bi-github" role="img" aria-label="GitHub">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
              <div class="quarto-toggle-container">
                  <a href="" class="quarto-color-scheme-toggle nav-link" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
                  <a href="" class="quarto-reader-toggle nav-link" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
              </div>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title">01 - Observability Instrumentation</h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation docked overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">Infrastructure As a Code</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../devops-tools/infrastructure-as-a-code/00-ansible.html" class="sidebar-item-text sidebar-link">00 - Infrastructure As A Code - Ansible</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../devops-tools/infrastructure-as-a-code/01-event-driven-ansible.html" class="sidebar-item-text sidebar-link">01 - Management As A Code - Event-Driven Ansible</a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">Observability</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../devops-tools/observability/00-what-is-observability.html" class="sidebar-item-text sidebar-link">00 - Observability - Introduction</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../devops-tools/observability/01-observability-tools.html" class="sidebar-item-text sidebar-link active">01 - Observability Instrumentation</a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#episodes" id="toc-episodes" class="nav-link" data-scroll-target="#episodes">Episodes</a>
  <ul class="collapse">
  <li><a href="#episode-3---science-vs-engineering-fight" id="toc-episode-3---science-vs-engineering-fight" class="nav-link" data-scroll-target="#episode-3---science-vs-engineering-fight">Episode 3 - Science vs Engineering, Fight!</a></li>
  <li><a href="#episode-4---observability-instrumentation" id="toc-episode-4---observability-instrumentation" class="nav-link" data-scroll-target="#episode-4---observability-instrumentation">Episode 4 - Observability Instrumentation</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/protossgp32/DevOps-training-projects/edit/main/docs/devops-tools/observability/01-observability-tools.qmd" class="toc-action">Edit this page</a></p><p><a href="https://github.com/protossgp32/DevOps-training-projects/issues/new" class="toc-action">Report an issue</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title d-none d-lg-block">01 - Observability Instrumentation</h1>
  <div class="quarto-categories">
    <div class="quarto-category">Observability</div>
    <div class="quarto-category">Monitoring</div>
    <div class="quarto-category">Metrics</div>
  </div>
  </div>

<div>
  <div class="description">
    Knowing some available observability tools
  </div>
</div>


<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>ProtossGP32 </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">March 28, 2023</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<section id="introduction" class="level1">
<h1>Introduction</h1>
<ul>
<li><p>Complete course:</p>
<ul>
<li><a href="https://academy.o11y.io/courses/practical-observability">oll1 - Practical Observability</a></li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../../images/devops/observability-oll1-practical-observability.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">When your teacher is a Jedi, you know you chose the course wisely</figcaption><p></p>
</figure>
</div></li>
<li><p>Objectives:</p>
<ul>
<li>Understand basic theory underlying observability</li>
<li>What type of data can be used for observability</li>
</ul></li>
</ul>
</section>
<section id="episodes" class="level1">
<h1>Episodes</h1>
<section id="episode-3---science-vs-engineering-fight" class="level2">
<h2 class="anchored" data-anchor-id="episode-3---science-vs-engineering-fight">Episode 3 - Science vs Engineering, Fight!</h2>
<p>Observability concepts. Basic theory underlying observability makes its application more effective.</p>
<p>Observability isn’t magic, and the data is procured in very specific ways by very specific tools. How that data is measured, moved, stored, analyzed and consumed is very specific to an organization’s needs.</p>
<p>To handle this, there are a few common concepts that helps understand as all observability tools and gadgets are built upon these.</p>
<ul>
<li><strong>Observation:</strong> Heart of observability, continually taking measurements of different kinds.
<ul>
<li><p>Data sampled at a given time.</p></li>
<li><p>At a minimum, they consist of a timestamp and some type of data to describe the status of the service.</p></li>
<li><p>There are a lot of different types of observations. A few examples:</p>
<ul>
<li>A system metric</li>
<li>An app log line</li>
<li>A network trace</li>
<li>A stack dump</li>
<li>A build status</li>
<li>An audit result</li>
<li>A picture of a server rack</li>
<li>A pithy tweet</li>
</ul></li>
<li><p><strong>Metrics:</strong> A metric is basically a value measured at a given time.</p>
<ul>
<li>A sample is a single measurement point</li>
<li>A series is a type of measurement taken over time, also called time series data</li>
<li>Metadata like tags may also be added to metrics to add context beyond the time serie</li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../../images/devops/observability-tools-observation.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Observation example - Time series with metadata regarding Kubernetes cluster and Pod</figcaption><p></p>
</figure>
</div>
<ul>
<li>High cardinality data gives you more granularity when analysing root causes, but can cause an explosion in the amount of data you have to handle
<ul>
<li><strong>Each additional dimension added causes a geometric increase in the amount of data in a given series</strong></li>
</ul></li>
</ul></li>
<li><p><strong>Time Skew:</strong> timestamps are critical because they allow us to line up events for correlation, but <strong>clock skew can cause variations in times reported</strong></p>
<ul>
<li>For high-resolution data, clock sync is mandatory</li>
<li>One of the worst cases of clock skew is when data comes in from different timezones but weren’t processed with awareness of their timezone</li>
</ul></li>
<li><p>Observations like log events and code trigger traces happen in real time, but metric observations aren’t trully continuous</p>
<ul>
<li>Metrics are sampled along a specific interval time that gives you a sampling frequency, or what we call a <strong>resolution</strong></li>
<li>Resolution can come in anywhere, from second to five minutes depending on its source</li>
</ul></li>
<li><p>Tools can <strong>skew the actual resolution</strong> of the retrieved data samples by:</p>
<ul>
<li>Downsampling: ignore a fraction of the samples to reduce the data handling cost (completely remove resolution)</li>
<li>Aggregation: average of data over time and deletion of source data to free data storage after some days (you shouldn’t need to keep second-resolution data after several times if no issue has appeared)</li>
<li>Interpolation: with data aggregation, the interpolation shows a rough estimation of values between aggregated values (straight line between two points). Interpolation won’t tell the real value of a metric at a given time if only aggregated data is provided (you can’t spell LINE without LIE)</li>
</ul></li>
<li><p>There’s value in all these data manipulation. You need to know when they’re being aplied (downsampled, aggregated, interpolated) in order to safely use these observations</p></li>
<li><p><strong>Delay</strong>: While some tools promise a 1-sec resolution, they may only report data every one or 5 minutes in a single payload. This means you get high-resolution but with some delay</p>
<ul>
<li>This concept is known as metric latency, delay or lag</li>
<li>Example of metric latency:
<ul>
<li>5:00:00 - Interesting event occurs</li>
<li>5:05:00 - Agent reports event bundle containing events from the last 5 minutes</li>
<li>5:15:00 - Collector ingests all bundles every 10 minutes into pipeline</li>
<li>5:20:00 - Indexer finishes indexing last collector data and you see the event</li>
</ul></li>
<li>In this last example, 20 minutes have passed since we’re aware of some event that has happened in the service. Data processing time must always be taken into account!</li>
</ul></li>
<li><p><strong>Metric retention:</strong> it referes to how long metric data is kept for analysis</p>
<ul>
<li>Aggregates may be kept longer than the underlying samples</li>
<li>Know how your tools handle this - data costs money to keep forever but you can’t do compares over time if the data’s gone</li>
<li>Understanding your retention date is a must!</li>
</ul></li>
</ul></li>
</ul>
<div class="callout-tip callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Some examples of observation
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li>A system metric (Sample)</li>
<li>The status of a build (Metadata) <del>- A target level of reliability for a service</del> (Threshold)</li>
<li>A line in an application log (Sammple)</li>
</ul>
<p>An observation is simply a measurement, and anything that can be measured therefore is able to be observed.</p>
<p>A threshold is not a measurement, is an opinionated value that defines ranges of behaviour</p>
</div>
</div>
<div class="callout-tip callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Methods that tools use to skew data samples
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li>Downsampling</li>
<li>Aggregation</li>
<li>Interpolation</li>
</ul>
<p>None of them are bad, you just have to decide on what scenarios that method is good enought to get some answers to your questions.</p>
</div>
</div>
<div class="callout-tip callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Don’t forget about Clock skew!!
</div>
</div>
<div class="callout-body-container callout-body">
<p>Clock skew can cause a variation in the reported timestamp for a given metric. If data is timezone-aware and it isn’t correctly processed, then we are dealing with a time-sync issue that is quite difficult to handle</p>
</div>
</div>
</section>
<section id="episode-4---observability-instrumentation" class="level2">
<h2 class="anchored" data-anchor-id="episode-4---observability-instrumentation">Episode 4 - Observability Instrumentation</h2>
<p><em>What kinds of observability data can you get, and what tools do you need to get it? Are we only the sum of our parts, or something greater?</em></p>
<p>There are many types of tooling that instrument various parts of your system in different ways.</p>
<p>Instrumentation can either be active or passive. In the real world there’s usually some overhead during collection. The idea of instrumentation with zero-impact is science-fiction.</p>
<p>Different data collection methods give you different outcomes:</p>
<ul>
<li>Synthetic monitoring is performed by hitting a URL to verify it works
<ul>
<li>Examples of tools: Solarwinds pingdom and UptimeRobot</li>
<li>It queries your system on a regular cadence from specific locations.
<ul>
<li>This mean <strong>data is more reliable for correlation and deviation, and therefore alerting</strong>, because the tools query your system whether you have active users or not</li>
<li>Provides more actionable feedback</li>
</ul></li>
</ul></li>
<li>Real-user monitoring: also known as end-user experience monitoring, measures latency and errors from end-user via a browser, mobile device or network
<ul>
<li>Examples of tools: Raygun</li>
<li>It gives more of a sense of an actual user experience</li>
</ul></li>
</ul>
<p>They each have their own latencies and methods for collecting said data.</p>
<p>Other instrumentation methods:</p>
<ul>
<li>Logs: generally admitted from services and applications automatically with minimum to no effort
<ul>
<li>ELK stack: elasticsearch + Logstash + kibana</li>
<li>They often convey more info than metrics</li>
<li>Able to tell very detailed things like the number of connection attempts from a user</li>
</ul></li>
<li>Distributed tracing: code or network-level instrumentation that wraps your application code, an external application calls in order to help you correlate them thorough different parts of your system
<ul>
<li>Calls to a modern service can go to many different components and tiers, and tracing can help you identify where your performance or reliability issues are.</li>
<li>Tools: Zipkin and Jaeger</li>
<li>You can get a lot of info from tracing but this poses challenges when it comes to being able to analyse it. Also, it may take a considerable amount of time and money to implement it in your application</li>
</ul></li>
<li>Metric monitoring: it dates back to SNMP polling tools like Cacti or NagIOs that focus on network device and server monitoring</li>
<li>Application performance management tools (APM): expensive commercial platforms that combine distributed tracing and continuous profiling of your applications
<ul>
<li>Makes it easy to look at the performance of area application base in system (?) at a glance</li>
</ul></li>
</ul>
<div class="callout-tip callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Remember: instrumentation always has some impact on system performance!
</div>
</div>
<div class="callout-body-container callout-body">
<p>There’s no such thing as zero-impact instrumentation. Though there are <em>very</em> lightweight libraries and collections available, consider the impact of each additional tool (and the total impact of all tools) that you add to your observability solution</p>
</div>
</div>
<div class="callout-tip callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Remember: there’s no <em>better</em> observability data
</div>
</div>
<div class="callout-body-container callout-body">
<p>Real User Monitoring (RUM) tools and Synthetic monitoring tools are complementary as each they have their own latencies and methods to collect data. It’s up to <em>you</em> to determine when and where best to use these tools.</p>
</div>
</div>
<div class="callout-tip callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Remember: for familiar structure logs, try ELK Stack
</div>
</div>
<div class="callout-body-container callout-body">
<p>Elasticsearch + Logstash + Kibana (ELK Stack) is a good first try on log analysis tools. If it doesn’t suit your needs, then go for other alternatives.</p>
</div>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../../devops-tools/observability/00-what-is-observability.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">00 - Observability - Introduction</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
      <div class="nav-footer-center">
        <ul class="footer-items list-unstyled">
    <li class="nav-item">
    <a class="nav-link" href="../../about.html">About</a>
  </li>  
</ul>
      </div>
  </div>
</footer>



</body></html>